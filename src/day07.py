def pick(i, j, accum):
  if ((accum * j) > (accum + j)) != (i & 1):
    return True
  else:
    return False

def run(l, i):
  accum, lr = l[0], l[1:]
  for j in lr:
    if pick(i, j, accum):
      accum *= j;
    else:
      accum += j;
    i >>= 1
  return accum

def binary_search(l, tgt, min, max):
  i = (max + min) // 2
  i_copy = i;
  accum, lr = l[0], l[1:]
  for j in lr:
    if pick(i, j, accum):
      accum *= j;
    else:
      accum += j;
    i >>= 1
  if accum == tgt:
    return i_copy
  elif max - min <= 1:
    return None
  elif accum > tgt:
    return binary_search(l, tgt, min, i_copy)
  elif accum < tgt:
    return binary_search(l, tgt, i_copy+1, max)
s = 0
cmp_con = [475875 + (0 << 32), 97776 + (0 << 32), 60858 + (0 << 32), 127899 + (0 << 32), 653556 + (0 << 32), 8948 + (0 << 32), 6454 + (0 << 32), 782 + (0 << 32), 1331712 + (0 << 32), 1069 + (0 << 32), 3195693 + (0 << 32), 751 + (0 << 32), 236658240 + (0 << 32), 7686 + (0 << 32), 66060 + (0 << 32), 480690 + (0 << 32), 21045024 + (0 << 32), 294336 + (0 << 32), 187968 + (0 << 32), 2137289544 + (0 << 32), 223250 + (0 << 32), 14229 + (0 << 32), 1672476 + (0 << 32), 1427 + (0 << 32), 444 + (0 << 32), 73191888 + (0 << 32), 16968 + (0 << 32), 77440 + (0 << 32), 664 + (0 << 32), 1031 + (0 << 32), 1621533120 + (0 << 32), 133110 + (0 << 32), 7605 + (0 << 32), 287825 + (0 << 32), 29106000 + (0 << 32), 556416 + (0 << 32), 82080 + (0 << 32), 11424 + (0 << 32), 59432 + (0 << 32), 1016349250 + (0 << 32), 30395070 + (0 << 32), 19045689 + (0 << 32), 466005 + (0 << 32), 528 + (0 << 32), 446 + (0 << 32), 170800 + (0 << 32), 7715 + (0 << 32), 267 + (0 << 32), 82513 + (0 << 32), 45144 + (0 << 32), 2230448 + (0 << 32), 206 + (0 << 32), 4048704 + (0 << 32), 9114 + (0 << 32), 211 + (0 << 32), 102 + (0 << 32), 286026 + (0 << 32), 317614 + (0 << 32), 20088 + (0 << 32), 176080 + (0 << 32), 83308 + (0 << 32), 14816 + (0 << 32), 33053 + (0 << 32), 1956 + (0 << 32), 6956 + (0 << 32), 1867 + (0 << 32), 2140 + (0 << 32), 5292 + (0 << 32), 9567810 + (0 << 32), 319315026 + (0 << 32), 52122 + (0 << 32), 114848 + (0 << 32), 283080 + (0 << 32), 54899 + (0 << 32), 816964768 + (2 << 32), 66 + (0 << 32), 266660 + (0 << 32), 79918080 + (0 << 32), 14597440 + (0 << 32), 462268 + (0 << 32), 82544 + (0 << 32), 2087576160 + (0 << 32), 1356 + (0 << 32), 579 + (0 << 32), 7844 + (0 << 32), 1706 + (0 << 32), 679838920 + (5 << 32), 324456 + (0 << 32), 250064836 + (0 << 32), 71568 + (0 << 32), 2280 + (0 << 32), 2473398968 + (1 << 32), 1856 + (0 << 32), 901318 + (0 << 32), 200046 + (0 << 32), 237 + (0 << 32), 767748 + (0 << 32), 9170 + (0 << 32), 517756140 + (0 << 32), 272079360 + (0 << 32), 620 + (0 << 32), 3031187360 + (10 << 32), 349496 + (0 << 32), 2638 + (0 << 32), 19422976 + (17 << 32), 683 + (0 << 32), 627660 + (0 << 32), 184115700 + (0 << 32), 39612 + (0 << 32), 6789 + (0 << 32), 9381848 + (0 << 32), 1476 + (0 << 32), 587300 + (0 << 32), 19878 + (0 << 32), 304 + (0 << 32), 598341120 + (12 << 32), 123920153 + (7 << 32), 321720 + (0 << 32), 3451 + (0 << 32), 59903676 + (0 << 32), 264192030 + (0 << 32), 4019 + (0 << 32), 2770263216 + (4 << 32), 2322270 + (0 << 32), 1435 + (0 << 32), 8729765 + (0 << 32), 3361296 + (0 << 32), 1303 + (0 << 32), 1767 + (0 << 32)]
l = []
for i in open("inputs/day07.txt").read().splitlines():
  a, b = i.split(": ")
  l = b.split(" ");
  a = int(a)
  l = [int(a) for a in l]
  for i in range(1 << len(l)):
    res = run(l, i)
    print(i, res)
    if res == a and False:
      s += a
      l.appen3
      break
print(s)
